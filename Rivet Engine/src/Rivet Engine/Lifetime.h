#ifndef Lifetime_H
#define Lifetime_H

#include "IAlarmCallback.h"
#include "GameObject.h"

////////////////////////////////////////////////////////////////////////////////////////////////////
/// \class	Lifetime
///
/// \brief	An alarm that despawns an object after a specified time.
///
/// \author	Mike Piunti
/// \date	05/23/2023
////////////////////////////////////////////////////////////////////////////////////////////////////
class Lifetime : public IAlarmCallback {
private:
	/// \brief	The object to despawn.
	GameObject* go;

public:
	////////////////////////////////////////////////////////////////////////////////////////////////////
	/// \fn	Lifetime::Lifetime(GameObject* o)
	///
	/// \brief	Creates a timed despawner ("lifetime") for a game object.
	///
	/// \param	o	The object to despawn.
	////////////////////////////////////////////////////////////////////////////////////////////////////
	Lifetime(GameObject* o) : go(o) {}

	Lifetime() = delete;
	Lifetime(const Lifetime&) = delete;
	Lifetime& operator=(const Lifetime&) = delete;
	~Lifetime() = default;

	////////////////////////////////////////////////////////////////////////////////////////////////////
	/// \fn	void Lifetime::Alarm() override
	///
	/// \brief	Despawns the object whose spawn callback we've stored.
	////////////////////////////////////////////////////////////////////////////////////////////////////
	void Alarm() override { go->Despawn(); }
};

#endif
